#!/usr/bin/env python3
import re

replacements = {
    b'yahoo.com'               : b'\x01' , # 1   : 1942758
    b'hotmail.com'             : b'\x02' , # 2   : 1018430
    b'mail.ru'                 : b'\x03' , # 3   : 998499
    b'gmail.com'               : b'\x04' , # 4   : 919974
    b'aol.com'                 : b'\x05' , # 5   : 320558
    b'yandex.ru'               : b'\x06' , # 6   : 158110
    b'yahoo.com.vn'            : b'\x07' , # 7   : 133011
    b'hotmail.it'              : b'\x08' , # 8   : 83939
    b'bk.ru'                   : b'\t'   , # 9   : 83333
    b'live.com'                : b'\n'   , # 10  : 81100
    b'hotmail.co.uk'           : b'\x0b' , # 11  : 77553
    b'westpost.net'            : b'\x0c' , # 12  : 73137
    b'web.de'                  : b'\r'   , # 13  : 61581
    b'comcast.net'             : b'\x0e' , # 14  : 60867
    b'msn.com'                 : b'\x0f' , # 15  : 55873
    b'list.ru'                 : b'\x10' , # 16  : 47446
    b'inbox.ru'                : b'\x11' , # 17  : 45739
    b'yahoo.co.uk'             : b'\x12' , # 18  : 45499
    b'rambler.ru'              : b'\x13' , # 19  : 43545
    b'aim.com'                 : b'\x14' , # 20  : 41970
    b'free.fr'                 : b'\x15' , # 21  : 37090
    b'gmx.de'                  : b'\x16' , # 22  : 37078
    b'sbcglobal.net'           : b'\x17' , # 23  : 35895
    b'live.it'                 : b'\x18' , # 24  : 35344
    b'hotmail.fr'              : b'\x19' , # 25  : 33272
    b'libero.it'               : b'\x1a' , # 26  : 28775
    b'ymail.com'               : b'\x1b' , # 27  : 25661
    b'verizon.net'             : b'\x1c' , # 28  : 20905
    b'wanadoo.fr'              : b'\x1d' , # 29  : 19591
    b'wp.pl'                   : b'\x1e' , # 30  : 19248
    b'yahoo.co.in'             : b'\x1f' , # 31  : 18145
    b'orange.fr'               : b' '    , # 32  : 17990
    b'rediffmail.com'          : b'!'    , # 33  : 17946
    b'cox.net'                 : b'"'    , # 34  : 17847
    b'yahoo.it'                : b'#'    , # 35  : 17226
    b'yahoo.de'                : b'$'    , # 36  : 16921
    b'hotmail.de'              : b'%'    , # 37  : 16878
    b'myspace.com'             : b'&'    , # 38  : 16285
    b'mail.com'                : b"'"    , # 39  : 15692
    b'att.net'                 : b'('    , # 40  : 15054
    b'bellsouth.net'           : b')'    , # 41  : 14972
    b'earthlink.net'           : b'*'    , # 42  : 14438
    b'googlemail.com'          : b'+'    , # 43  : 13697
    b'o2.pl'                   : b','    , # 44  : 13577
    b'rocketmail.com'          : b'-'    , # 45  : 13471
    b'alice.it'                : b'.'    , # 46  : 13412
    b'freenet.de'              : b'/'    , # 47  : 13383
    b't-online.de'             : b'0'    , # 48  : 12724
    b'live.co.uk'              : b'1'    , # 49  : 12498
    b'yahoo.fr'                : b'2'    , # 50  : 12256
    b'outlook.com'             : b'3'    , # 51  : 12114
    b'tiscali.it'              : b'4'    , # 52  : 12097
    b'gmx.net'                 : b'5'    , # 53  : 11334
    b'qip.ru'                  : b'6'    , # 54  : 11073
    b'yahoo.com.br'            : b'7'    , # 55  : 10811
    b'btinternet.com'          : b'8'    , # 56  : 10800
    b'seznam.cz'               : b'9'    , # 57  : 10421
    b'charter.net'             : b':'    , # 58  : 9794
    b'interia.pl'              : b';'    , # 59  : 9654
    b'sina.com'                : b'<'    , # 60  : 9135
    b'mac.com'                 : b'='    , # 61  : 9043
    b'ntlworld.com'            : b'>'    , # 62  : 8984
    b'ukr.net'                 : b'?'    , # 63  : 8849
    b'numericable.fr'          : b'@'    , # 64  : 7925
    b'mail.ua'                 : b'A'    , # 65  : 7798
    b'zing.vn'                 : b'B'    , # 66  : 7675
    b'ya.ru'                   : b'C'    , # 67  : 7616
    b'myemailboxmail.com'      : b'D'    , # 68  : 7582
    b'juno.com'                : b'E'    , # 69  : 7417
    b'freelymail.com'          : b'F'    , # 70  : 7188
    b'yahoo.ca'                : b'G'    , # 71  : 7028
    b'freemailmail.com'        : b'H'    , # 72  : 7013
    b'inbox.lv'                : b'I'    , # 73  : 6570
    b'gmx.at'                  : b'J'    , # 74  : 6344
    b'live.fr'                 : b'K'    , # 75  : 6084
    b'freemailboxy.com'        : b'L'    , # 76  : 6072
    b'optonline.net'           : b'M'    , # 77  : 5982
    b'excite.com'              : b'N'    , # 78  : 5981
    b'163.com'                 : b'O'    , # 79  : 5876
    b'usa.net'                 : b'P'    , # 80  : 5730
    b'yahoo.com.au'            : b'Q'    , # 81  : 5660
    b'arcor.de'                : b'R'    , # 82  : 5590
    b'yahoo.com.tw'            : b'S'    , # 83  : 5426
    b'email.com'               : b'T'    , # 84  : 5251
    b'yahoo.es'                : b'U'    , # 85  : 5176
    b'hotmail.es'              : b'V'    , # 86  : 4976
    b'tiscali.co.uk'           : b'W'    , # 87  : 4966
    b'home.com'                : b'X'    , # 88  : 4891
    b'abv.bg'                  : b'Y'    , # 89  : 4841
    b'vipmail.net'             : b'Z'    , # 90  : 4772
    b'nowemailbox.com'         : b'['    , # 91  : 4768
    b'me.com'                  : b'\\'   , # 92  : 4723
    b'hotmailboxlive.com'      : b']'    , # 93  : 4678
    b'live.nl'                 : b'^'    , # 94  : 4492
    b'virgilio.it'             : b'_'    , # 95  : 4453
    b'anonemailbox.com'        : b'`'    , # 96  : 4443
    b'op.pl'                   : b'a'    , # 97  : 4368
    b'netscape.net'            : b'b'    , # 98  : 4278
    b'yahoo.com.mx'            : b'c'    , # 99  : 4117
    b'live.de'                 : b'd'    , # 100 : 4063
    b'uol.com.br'              : b'e'    , # 101 : 3782
    b'yahoo.com.uk'            : b'f'    , # 102 : 3732
    b'yahoo.com.hk'            : b'g'    , # 103 : 3725
    b'cs.com'                  : b'h'    , # 104 : 3712
    b'blueyonder.co.uk'        : b'i'    , # 105 : 3699
    b'telenet.be'              : b'j'    , # 106 : 3646
    b'myemailmail.com'         : b'k'    , # 107 : 3641
    b'live.com.au'             : b'l'    , # 108 : 3616
    b'bol.com.br'              : b'm'    , # 109 : 3611
    b'lycos.com'               : b'n'    , # 110 : 3591
    b'bigmir.net'              : b'o'    , # 111 : 3571
    b'netzero.net'             : b'p'    , # 112 : 3533
    b'tom.com'                 : b'q'    , # 113 : 3528
    b'gmail.ru'                : b'r'    , # 114 : 3494
    b'live.ca'                 : b's'    , # 115 : 3489
    b'tlen.pl'                 : b't'    , # 116 : 3304
    b'freemail.hu'             : b'u'    , # 117 : 3289
    b'yahoo.co.jp'             : b'v'    , # 118 : 3174
    b'yandex.ua'               : b'w'    , # 119 : 3136
    b'yahoo.com.sg'            : b'x'    , # 120 : 3130
    b'yahoo.com.cn'            : b'y'    , # 121 : 3098
    b'yahoo.com.my'            : b'z'    , # 122 : 3048
    b'mindspring.com'          : b'{'    , # 123 : 3045
    b'yahoo.com.ph'            : b'|'    , # 124 : 3032
    b'shaw.ca'                 : b'}'    , # 125 : 3014
    b'myemailboxy.com'         : b'~'    , # 126 : 2990
    b'rogers.com'              : b'\x7f' , # 127 : 2973
    b'sympatico.ca'            : b'\x80' , # 128 : 2957
    b'adelphia.net'            : b'\x81' , # 129 : 2956
    b'windstream.net'          : b'\x82' , # 130 : 2916
    b'onlinemailfree.com'      : b'\x83' , # 131 : 2857
    b'yahoo.com.ar'            : b'\x84' , # 132 : 2822
    b'peoplepc.com'            : b'\x85' , # 133 : 2811
    b'laposte.net'             : b'\x86' , # 134 : 2768
    b'uukx.info'               : b'\x87' , # 135 : 2753
    b'tut.by'                  : b'\x88' , # 136 : 2729
    b'bigpond.com'             : b'\x89' , # 137 : 2721
    b'naver.com'               : b'\x8a' , # 138 : 2717
    b'icloud.com'              : b'\x8b' , # 139 : 2679
    b'privacymailshh.com'      : b'\x8c' , # 140 : 2673
    b'netzero.com'             : b'\x8d' , # 141 : 2649
    b'.mail.ru'                : b'\x8e' , # 142 : 2629
    b'onet.pl'                 : b'\x8f' , # 143 : 2493
    b'windowslive.com'         : b'\x90' , # 144 : 2489
    b'gmx.com'                 : b'\x91' , # 145 : 2459
    b'yahoo.co.id'             : b'\x92' , # 146 : 2420
    b'prodigy.net'             : b'\x93' , # 147 : 2385
    b'email.it'                : b'\x94' , # 148 : 2366
    b'mailinator.com'          : b'\x95' , # 149 : 2362
    b'noos.fr'                 : b'\x96' , # 150 : 2326
    b'embarqmail.com'          : b'\x97' , # 151 : 2322
    b'i.ua'                    : b'\x98' , # 152 : 2309
    b'iol.ie'                  : b'\x99' , # 153 : 2273
    b'sky.com'                 : b'\x9a' , # 154 : 2271
    b'126.com'                 : b'\x9b' , # 155 : 2245
    b'mchsi.com'               : b'\x9c' , # 156 : 2222
    b'mail.ry'                 : b'\x9d' , # 157 : 2216
    b'live.com.mx'             : b'\x9e' , # 158 : 2210
    b'sify.com'                : b'\x9f' , # 159 : 2157
    b'hotmail.com.blocked_recovery' : b'\xa0' , # 160 : 2117
    b'blackplanet.com'         : b'\xa1' , # 161 : 2103
    b'walla.com'               : b'\xa2' , # 162 : 2093
    b'vp.pl'                   : b'\xa3' , # 163 : 2085
    b'insightbb.com'           : b'\xa4' , # 164 : 2070
    b'gadball.com'             : b'\xa5' , # 165 : 2015
    b'parapa.terrhq.ru'        : b'\xa6' , # 166 : 1983
    b'tampabay.rr.com'         : b'\xa7' , # 167 : 1963
    b'optusnet.com.au'         : b'\xa8' , # 168 : 1945
    b'hanmail.net'             : b'\xa9' , # 169 : 1934
    b'hot.ee'                  : b'\xaa' , # 170 : 1924
    b'yahoo.gr'                : b'\xab' , # 171 : 1899
    b'aliceadsl.fr'            : b'\xac' , # 172 : 1896
    b'yandex.com'              : b'\xad' , # 173 : 1894
    b'qq.com'                  : b'\xae' , # 174 : 1878
    b'us.army.mil'             : b'\xaf' , # 175 : 1875
    b'tmail.com'               : b'\xb0' , # 176 : 1869
    b'suddenlink.net'          : b'\xb1' , # 177 : 1853
    b'myway.com'               : b'\xb2' , # 178 : 1837
    b'ig.com.br'               : b'\xb3' , # 179 : 1796
    b'one.lv'                  : b'\xb4' , # 180 : 1733
    b'roadrunner.com'          : b'\xb5' , # 181 : 1726
    b'gmx.ch'                  : b'\xb6' , # 182 : 1719
    b'indiatimes.com'          : b'\xb7' , # 183 : 1689
    b'homechoice.co.uk'        : b'\xb8' , # 184 : 1687
    b'mai.ru'                  : b'\xb9' , # 185 : 1675
    b'altavista.com'           : b'\xba' , # 186 : 1647
    b'yhaoo.com'               : b'\xbb' , # 187 : 1626
    b'neuf.fr'                 : b'\xbc' , # 188 : 1600
    b'centrum.cz'              : b'\xbd' , # 189 : 1578
    b'live.se'                 : b'\xbe' , # 190 : 1575
    b'poczta.onet.pl'          : b'\xbf' , # 191 : 1556
    b'inbox.com'               : b'\xc0' , # 192 : 1551
    b'online.de'               : b'\xc1' , # 193 : 1543
    b'pacbell.net'             : b'\xc2' , # 194 : 1542
    b'cfl.rr.com'              : b'\xc3' , # 195 : 1541
    b'maii.ru'                 : b'\xc4' , # 196 : 1534
    b'frontiernet.net'         : b'\xc5' , # 197 : 1532
    b'worldnet.att.net'        : b'\xc6' , # 198 : 1528
    b'go2.pl'                  : b'\xc7' , # 199 : 1527
    b'bluewin.ch'              : b'\xc8' , # 200 : 1524
    b'gci.net'                 : b'\xc9' , # 201 : 1512
    b'sibmail.com'             : b'\xca' , # 202 : 1474
    b'telus.net'               : b'\xcb' , # 203 : 1471
    b'meta.ua'                 : b'\xcc' , # 204 : 1469
    b'citromail.hu'            : b'\xcd' , # 205 : 1452
    b'tin.it'                  : b'\xce' , # 206 : 1437
    b'orsk.ru'                 : b'\xcf' , # 207 : 1433
    b'modulonet.fr'            : b'\xd0' , # 208 : 1413
    b'gmx.co.uk'               : b'\xd1' , # 209 : 1411
    b'fastwebnet.it'           : b'\xd2' , # 210 : 1399
    b'email.cz'                : b'\xd3' , # 211 : 1399
    b'talktalk.net'            : b'\xd4' , # 212 : 1396
    b'webtv.net'               : b'\xd5' , # 213 : 1353
    b'yahoo.in'                : b'\xd6' , # 214 : 1345
    b'google.com'              : b'\xd7' , # 215 : 1332
    b'interia.eu'              : b'\xd8' , # 216 : 1319
    b'virgin.net'              : b'\xd9' , # 217 : 1311
    b'onebox.com'              : b'\xda' , # 218 : 1310
    b'onet.eu'                 : b'\xdb' , # 219 : 1289
    b'yaho.com'                : b'\xdc' , # 220 : 1246
    b'mynet.com'               : b'\xdd' , # 221 : 1245
    b'usa.com'                 : b'\xde' , # 222 : 1245
    b'mail.bg'                 : b'\xdf' , # 223 : 1237
    b'pochta.ru'               : b'\xe0' , # 224 : 1219
    b'hotmail.ca'              : b'\xe1' , # 225 : 1202
    b'azet.sk'                 : b'\xe2' , # 226 : 1188
    b'mailcity.com'            : b'\xe3' , # 227 : 1155
    b'sfr.fr'                  : b'\xe4' , # 228 : 1150
    b'comcast.com'             : b'\xe5' , # 229 : 1145
    b'caramail.com'            : b'\xe6' , # 230 : 1139
    b'poczta.fm'               : b'\xe7' , # 231 : 1125
    b'gawab.com'               : b'\xe8' , # 232 : 1123
    b'terra.com.br'            : b'\xe9' , # 233 : 1119
    b'nate.com'                : b'\xea' , # 234 : 1118
    b'aon.at'                  : b'\xeb' , # 235 : 1113
    b'catcha.com'              : b'\xec' , # 236 : 1112
    b'yopmail.com'             : b'\xed' , # 237 : 1101
    b'bigpond.net.au'          : b'\xee' , # 238 : 1090
    b'home.nl'                 : b'\xef' , # 239 : 1085
    b'yhoo.com'                : b'\xf0' , # 240 : 1082
    b'elance.com'              : b'\xf1' , # 241 : 1079
    b'btopenworld.com'         : b'\xf2' , # 242 : 1068
    b'alltel.net'              : b'\xf3' , # 243 : 1067
    b'q.com'                   : b'\xf4' , # 244 : 1065
    b'classgess.com'           : b'\xf5' , # 245 : 1036
    b'dabjam.com'              : b'\xf6' , # 246 : 1028
    b'bigfoot.com'             : b'\xf7' , # 247 : 1025
    b'mediaone.net'            : b'\xf8' , # 248 : 1024
    b'cableone.net'            : b'\xf9' , # 249 : 1023
    b'yeah.net'                : b'\xfa' , # 250 : 1013
    b'verizon.com'             : b'\xfb' , # 251 : 1012
    b'astramail.bizland.com'   : b'\xfc' , # 252 : 1008
    b'centrum.sk'              : b'\xfd' , # 253 : 996
    b'fsmail.net'              : b'\xfe' , # 254 : 986
    b'rediff.com'              : b'\xff' , # 255 : 986
}

inverseReplacements = {v: k for k, v in replacements.items()}

regexpReplacements = re.compile(b'(@)(' + b'|'.join(map(re.escape, replacements.keys())) + b')$')
def compress(text):
    return regexpReplacements.sub(lambda match: b'@' + replacements[match.group(2)], text)

regexpInverse = re.compile(b'(@)(' + b'|'.join(map(re.escape, inverseReplacements.keys())) + b')$')
def uncompress(text):
    return regexpInverse.sub(lambda match: b'@' + inverseReplacements[match.group(2)], text)

if __name__ == '__main__':
    print(compress(b'hello@live.com.pl'))
    print(compress(b'test@gmail.com'))
    print(compress(b'hax0r.mail.ru@mail.ru'))
    print(compress(b'hx01asd98r'))
